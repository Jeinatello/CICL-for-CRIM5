<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>CICL Simulation – RA 9344 & 10630</title>

<style>
body {
    margin: 0;
    font-family: "Segoe UI", Arial, sans-serif;
    background: linear-gradient(135deg, #1a1a1a, #000000);
    color: #fff;
    overflow: hidden;
}

/* --- Game Container --- */
#game-container {
    width: 900px;
    height: 600px;
    margin: 30px auto;
    border-radius: 12px;
    overflow: hidden;
    background-size: cover;
    background-position: center;
    border: 2px solid #444;
    position: relative;
    transition: background-image 1s ease-in-out;
    box-shadow: 0 0 25px #000;
}

/* --- TITLE SCREEN --- */
#title-screen {
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg, rgba(0,0,0,0.85), rgba(0,0,0,0.75));
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    z-index: 20;
    opacity: 1;
    transition: opacity 0.8s ease;
}

#title-screen.hidden {
    opacity: 0;
    pointer-events: none;
}

#title-title {
    font-size: 36px;
    font-weight: bold;
    text-shadow: 0 0 10px #000;
    margin-bottom: 20px;
}

#title-sub {
    font-size: 20px;
    opacity: 0.85;
    margin-bottom: 40px;
}

#start-button {
    background: #66c2ff;
    color: #000;
    padding: 12px 30px;
    font-size: 20px;
    border-radius: 8px;
    cursor: pointer;
    font-weight: bold;
    box-shadow: 0 0 12px #66c2ff;
    transition: 0.3s;
}

#start-button:hover {
    background: #a7e0ff;
    transform: translateY(-3px);
    box-shadow: 0 0 20px #a7e0ff;
}

/* --- TITLE SCREEN LOGOS --- */
#logo-container {
    position: absolute;
    bottom: 20px;
    left: 20px;
    display: flex;
    gap: 15px;
}

.logo-placeholder {
    width: 80px;
    height: 80px;
    background: rgba(255,255,255,0.12);
    border: 2px dashed rgba(255,255,255,0.32);
    border-radius: 10px;
}

/* --- CHILD CHARACTER RIGHT SIDE --- */
#child-placeholder {
    position: absolute;
    bottom: 20px;
    right: 20px;
    width: 140px;
    height: 180px;
    background: rgba(255,255,255,0.12);
    border: 2px dashed rgba(255,255,255,0.32);
    border-radius: 10px;
}

/* --- Characters --- */
.character-img {
    position: absolute;
    bottom: 0;
    height: 75%;
    opacity: 0;
    transition: opacity 0.8s ease, transform 0.8s ease;
    transform: translateY(20px);
}

.character-img.show {
    opacity: 1;
    transform: translateY(0px);
}

/* --- Dialogue Box --- */
#dialogue-box {
    position: absolute;
    bottom: 0;
    width: 100%;
    background: rgba(0,0,0,0.65);
    padding: 22px;
    box-sizing: border-box;
    border-top: 2px solid rgba(255,255,255,0.2);
    backdrop-filter: blur(5px);
    opacity: 0;
    transform: translateY(20px);
    transition: opacity .6s ease, transform .6s ease;
}

#dialogue-box.visible {
    opacity: 1;
    transform: translateY(0px);
}

#name {
    font-size: 22px;
    font-weight: bold;
    margin-bottom: 8px;
    color: #66c2ff;
    text-shadow: 0 0 6px #000;
}

#text {
    font-size: 18px;
    margin-bottom: 14px;
    line-height: 1.45;
}

.choice {
    background: rgba(255,255,255,0.12);
    padding: 10px;
    margin: 6px 0;
    border-radius: 6px;
    cursor: pointer;
    transition: 0.3s;
    border-left: 4px solid #66c2ff;
}

.choice:hover {
    background: rgba(255,255,255,0.28);
    transform: translateX(4px);
}

#extra-buttons { margin-top: 10px; }

.extra-btn {
    background: rgba(255,255,255,0.15);
    color: #fff;
    padding: 7px 12px;
    border-radius: 4px;
    cursor: pointer;
    margin-right: 6px;
    display: inline-block;
    font-size: 14px;
    transition: 0.3s;
    border: 1px solid rgba(255,255,255,0.15);
}

.extra-btn:hover {
    background: rgba(255,255,255,0.30);
}

/* --- COMIC SLIDESHOW --- */
#comic-slideshow img {
    display: block;
}
</style>
</head>
<body>

<div id="game-container">

    <!-- ============================== TITLE SCREEN ================================ -->
    <div id="title-screen">
        <div id="title-title">Process of Handling a CICL</div>
        <div id="title-sub">A Guided Simulation of RA 9344 & 10630 Procedures</div>

        <div id="start-button" onclick="startGame()">START</div>

        <!-- Logo placeholders -->
        <div id="logo-container">
            <img class="logo-placeholder" src="tcu.png" alt="TCU Logo">
            <img class="logo-placeholder" src="ccj.png" alt="CCJ Logo">
        </div>

        <!-- Child character placeholder -->
        <div id="child-placeholder"></div>
    </div>

    <!-- COMIC SLIDESHOW -->
    <div id="comic-slideshow" style="position:absolute; inset:0; background:rgba(0,0,0,0.95); display:flex; flex-direction:column; align-items:center; justify-content:center; color:#fff; text-align:center; z-index:30; opacity:0; pointer-events:none; transition:opacity 0.5s;">
        <img id="comic-image" src="" style="max-width:80%; max-height:60%; border:3px solid #fff; border-radius:8px; margin-bottom:20px;">
        <div id="comic-caption" style="font-size:20px; margin-bottom:20px;"></div>
        <div id="comic-next" style="background:#66c2ff; color:#000; padding:12px 25px; border-radius:8px; cursor:pointer; font-weight:bold; font-size:18px;">NEXT</div>
    </div>

    <!-- Game Area -->
    <div id="characters-container"></div>
    <div id="dialogue-box">
        <div id="name"></div>
        <div id="text"></div>
        <div id="choices"></div>
        <div id="extra-buttons"></div>
    </div>
</div>

<script>

/* ======================= COMIC SLIDES ======================= */
const comicSlides = [
    { img: "comic1.png", caption: "A child has been reported for an incident in the community." },
    { img: "comic2.png", caption: "The local authorities and social workers are preparing to intervene." },
    { img: "comic3.png", caption: "This simulation will guide you through the proper steps." }
];

/* ======================= SCENES ======================= */
let previousScene = null;

let scenes = {
    start: {
        name: "Lazo",
        text: "A Child has reportedly committed an offense. You will now simulate the procedure of handling CICL under RA 9344 & 10630.",
        bg: "bg_community.png",
        char: ["narrator.png"],
        choices: [
            { text: "Begin Simulation", next: "leoContact" }
        ]
    },

    leoContact: {
        name: "LEO",
        text: "I approached the child calmly. I must avoid intimidation and introduce myself as Ate/Kuya.",
        bg: "bg_street_leo.png",
        char: ["leo.png"],
        choices: [{ text: "Perform LEO Duties", next: "leoDuties1" }]
    },

    /* --- LEO DUTIES CHRONOLOGICAL --- */
    leoDuties1: {
        name: "LEO",
        text: "1. Determine the child's age.",
        bg: "bg_police_station.png",
        char: ["leo.png"],
        choices: [
            { text: "Age determined", next: "leoDuties2" },
            { text: "No records found → Presumption of Minority", next: "leoDuties2" }
        ]
    },

    leoDuties2: {
        name: "LEO",
        text: "2. Inform the following: Parents/Guardian, Social Worker, and Public Attorney's Office (PAO).",
        bg: "bg_police_station.png",
        char: ["leo.png"],
        choices: [
            { text: "Informed all parties", next: "leoDuties3" }
        ]
    },

    leoDuties3: {
        name: "LEO",
        text: "3. Go to the nearest public hospital and conduct medico-legal procedures.",
        bg: "bg_police_station.png",
        char: ["leo.png"],
        choices: [
            { text: "Medico-legal completed", next: "wcpd" }
        ]
    },

    wcpd: {
        name: "Social Worker",
        text: "I will be assisting with the case. We will categorize the child based on age and determine discernment.",
        bg: "bg_wcpd.png",
        char: ["socialworker.png"],
        choices: [{ text: "Determine Age", next: "ageSelect" }]
    },

    /* --- AGE SELECTION --- */
    ageSelect: {
        name: "Social Worker",
        text: "Select the child's age category:",
        bg: "bg_dswd.png",
        char: ["socialworker.png"],
        choices: [
            { text: "15 and below", next: "age15below" },
            { text: "15 and above but below 18", next: "age15to18" }
        ]
    },

    age15below: {
        name: "Social Worker",
        text: "The child is 15 or below. Under RA 9344, the child is totally exempt from criminal liability.",
        bg: "bg_dswd.png",
        char: ["socialworker.png"],
        choices: [
            { text: "Turn over to parents/guardian", next: "turnoverParents15below" },
            { text: "Return", next: "ageSelect" }
        ]
    },

    turnoverParents15below: {
        name: "Parents",
        text: "The parents will take responsibility for the child.",
        bg: "bg_house.png",
        char: ["mother.png", "father.png"],
        choices: [
            { text: "Refer to Intervention Program", next: "interventionEnd" },
            { text: "Back", next: "age15below" }
        ]
    },

    interventionEnd: {
        name: "Lazo",
        text: "The child is placed in an intervention program and will soon be reintegrated into the community.",
        bg: "bg_community.png",
        char: ["narrator.png"]
    },

    age15to18: {
        name: "Social Worker",
        text: "The child is 15 above but below 18. Now determine DISCERNMENT:",
        bg: "bg_dswd.png",
        char: ["socialworker.png"],
        choices: [
            { text: "Without discernment", next: "noDiscernment" },
            { text: "With discernment", next: "withDiscernment" },
            { text: "Return", next: "ageSelect" }
        ]
    },

    noDiscernment: {
        name: "Social Worker",
        text: "The child acted WITHOUT discernment. Legal outcome: Intervention Program.",
        bg: "bg_dswd.png",
        char: ["socialworker.png"],
        choices: [
            { text: "Turn over to parents", next: "interventionEnd" },
            { text: "Back", next: "age15to18" }
        ]
    },

    withDiscernment: {
        name: "Social Worker",
        text: "The child acted WITH discernment. Determine the nature of the offense:",
        bg: "bg_dswd.png",
        char: ["socialworker.png"],
        choices: [
            { text: "Non-serious offense", next: "nonSerious" },
            { text: "Serious offense", next: "seriousSelectAge" },
            { text: "Back", next: "age15to18" }
        ]
    },

    nonSerious: {
        name: "Social Worker",
        text: "Non-serious offense. The child qualifies for DIVERSION unless otherwise disqualified due to qualifications.",
        bg: "bg_dswd.png",
        char: ["socialworker.png"],
        choices: [
            { text: "Proceed with Diversion", next: "diversionEnd" },
            { text: "Child is disqualified → Proceed to Court", next: "prosecutionStart" },
            { text: "Back", next: "withDiscernment" }
        ]
    },

    diversionEnd: {
        name: "Lazo",
        text: "A diversion program is conducted and the child complies.",
        bg: "bg_community.png",
        char: ["cicl.png"]
    },

    seriousSelectAge: {
        name: "Social Worker",
        text: "Determine the child’s age for serious crime procedures:",
        bg: "bg_dswd.png",
        char: ["socialworker.png"],
        choices: [
            { text: "Age 12 to 15, serious crime", next: "serious12to15" },
            { text: "Age 15 to 18, serious crime", next: "serious15to18" },
            { text: "Back", next: "withDiscernment" }
        ]
    },

    serious12to15: {
        name: "Social Worker",
        text: "For ages 12 to 15 with a serious offense (RA 10630): Bahay Pag-asa → IJISC/IIP: If repetition, Bahay Pag-asa → IJISC/IIP.",
        bg: "bg_dswd.png",
        char: ["socialworker.png"],
        choices: [
            { text: "Proceed to Bahay Pag-asa", next: "bpaEnd" },
            { text: "Back", next: "seriousSelectAge" }
        ]
    },

    bpaEnd: {
        name: "Narrator",
        text: "The child undergoes IJISC/IIP and is later allowed to be reintegrated to society.",
        bg: "bg_dswd.png",
        char: ["cicl.png"]
    },

    serious15to18: {
        name: "Social Worker",
        text: "For ages 15 to 18 with serious offense with penalty of 6 yrs and 1 day above: Proceed to Prosecution.",
        bg: "bg_dswd.png",
        char: ["socialworker.png"],
        choices: [
            { text: "Proceed to Prosecution", next: "prosecutionStart" },
            { text: "Back", next: "seriousSelectAge" }
        ]
    },

    prosecutionStart: {
        name: "Prosecutor",
        text: "Preliminary Investigation begins.",
        bg: "bg_prosecutor.png",
        char: ["prosecutor.png"],
        choices: [
            { text: "Determine Probable Cause", next: "probableCause" },
            { text: "Back", next: "serious15to18" }
        ]
    },

    probableCause: {
        name: "Prosecutor",
        text: "Probable Cause is established. Filing Information to the Court.",
        bg: "bg_prosecutor.png",
        char: ["prosecutor.png"],
        choices: [
            { text: "Proceed to Court", next: "court" },
            { text: "Back", next: "prosecutionStart" }
        ]
    },

    court: {
        name: "Judge",
        text: "The Family Court hears the case with child-sensitive procedures.",
        bg: "bg_court.png",
        char: ["judge.png"],
        choices: [
            { text: "Child is NOT GUILTY", next: "notGuilty" },
            { text: "Child is GUILTY", next: "guilty" },
            { text: "Back", next: "probableCause" }
        ]
    },

    notGuilty: {
        name: "Lazo",
        text: "Case dismissed. The child returns to family, wil be subjected to intervention program.",
        bg: "bg_community.png",
        char: ["narrator.png"]
    },

    guilty: {
        name: "Judge",
        text: "Child is found GUILTY. Sentence is suspended. Commitment to Youth Rehabilitation Center.",
        bg: "bg_court.png",
        char: ["judge.png"],
        choices: [
            { text: "Assess Degree of Change", next: "degreeCheck" },
            { text: "Back", next: "court" }
        ]
    },

    degreeCheck: {
        name: "Social Worker",
        text: "Evaluate if the child demonstrates degree of change (disposition):",
        bg: "bg_yrc.png",
        char: ["socialworker.png"],
        choices: [
            { text: "Degree achieved", next: "fulfilled" },
            { text: "Not achieved", next: "notFulfilled" },
            { text: "Back", next: "guilty" }
        ]
    },

    fulfilled: {
        name: "Judge",
        text: "Degree of change achieved (Fulfilled). Case dismissed, no criminal records. Child reintegrated to society.",
        bg: "bg_court.png",
        char: ["judge.png"]
    },

    notFulfilled: {
        name: "Judge",
        text: "Degree of change not achieved (Not Fulfilled). Options:",
        bg: "bg_court.png",
        char: ["judge.png"],
        choices: [
            { text: "Probation", next: "probationEnd" },
            { text: "Agricultural Penal Farm", next: "continueYRC" },
            { text: "Back", next: "degreeCheck" }
        ]
    },

    probationEnd: {
        name: "Lazo",
        text: "Child is placed on probation with monitoring and observation until end of sentence.",
        bg: "bg_community.png",
        char: ["cicl.png"]
    },

    continueYRC: {
        name: "Lazo",
        text: "Child will reside in an Agricultural Penal Farm where he/she will serve his/her sentence.",
        bg: "bg_penal.png",
        char: ["cicl.png"]
    }
};

/* ======================= RENDER ENGINE ======================= */
function show(scene) {
    let s = scenes[scene];

    if (!s) return;

    let dialog = document.getElementById("dialogue-box");
    dialog.classList.remove("visible");

    setTimeout(() => {
        document.getElementById("name").innerText = s.name || "";
        document.getElementById("text").innerText = s.text || "";

        // Choices
        let choicesDiv = document.getElementById("choices");
        choicesDiv.innerHTML = "";
        if (s.choices) {
            s.choices.forEach(choice => {
                let btn = document.createElement("div");
                btn.className = "choice";
                btn.innerText = choice.text;
                btn.onclick = () => {
                    previousScene = scene;
                    show(choice.next);
                };
                choicesDiv.appendChild(btn);
            });
        }

        // Extra buttons (Back)
        let extra = document.getElementById("extra-buttons");
        extra.innerHTML = "";
        if (previousScene && previousScene !== scene) {
            let backBtn = document.createElement("div");
            backBtn.className = "extra-btn";
            backBtn.innerText = "Back";
            backBtn.onclick = () => show(previousScene);
            extra.appendChild(backBtn);
        }

        dialog.classList.add("visible");
    }, 300);

    // Background image
    document.getElementById("game-container").style.backgroundImage = `url(${s.bg})`;

    // Characters
    let chars = document.getElementById("characters-container");
    chars.innerHTML = "";
    if (s.char) {
        s.char.forEach((src, i) => {
            let img = document.createElement("img");
            img.src = src;
            img.className = "character-img";
            img.style.left = `${40 + i * 250}px`;
            chars.appendChild(img);
            setTimeout(() => img.classList.add("show"), 50 + i * 150);
        });
    }
}

/* ======================= TITLE SCREEN → START → COMIC ======================= */
function startGame() {
    let title = document.getElementById("title-screen");
    title.classList.add("hidden");

    let comic = document.getElementById("comic-slideshow");
    let comicImage = document.getElementById("comic-image");
    let comicCaption = document.getElementById("comic-caption");
    let nextBtn = document.getElementById("comic-next");
    let currentSlide = 0;

    comic.style.opacity = "1";
    comic.style.pointerEvents = "auto";

    function showSlide(index) {
        comicImage.src = comicSlides[index].img;
        comicCaption.innerText = comicSlides[index].caption;
    }

    showSlide(currentSlide);

    nextBtn.onclick = () => {
        currentSlide++;
        if (currentSlide < comicSlides.length) {
            showSlide(currentSlide);
        } else {
            comic.style.opacity = "0";
            comic.style.pointerEvents = "none";
            setTimeout(() => {
                show("start");
            }, 500);
        }
    };
}

</script>

</body>
</html>
